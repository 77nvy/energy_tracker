{% extends "base.html" %}
{% block content %}
<div class="page-content">
  <h1 class="page-title">
    {% if booking_type == 'consultation' %}
      Book Your Free Consultation
    {% else %}
      Schedule Installation
    {% endif %}
  </h1>

  <p style="color: var(--text-muted); font-size: 16px; margin-bottom: 32px;">
    {{ product["name"] }} - 
    {% if booking_type == 'consultation' %}
      Speak with our energy experts
    {% else %}
      Professional installation service
    {% endif %}
  </p>

  {% if errors %}
    <div class="alert alert-danger">
      <strong>Please fix the following errors:</strong>
      <ul style="margin: 8px 0 0 20px;">
        {% for error in errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <div class="form-card">
    <form method="POST">
      <div class="mb-2">
        <label class="form-label">Full Name *</label>
        <input class="form-control" type="text" name="full_name" 
               value="{{ form_data.get('full_name', '') if form_data else '' }}" required>
      </div>

      <div class="mb-2">
        <label class="form-label">Email *</label>
        <input class="form-control" type="email" name="email" 
               value="{{ form_data.get('email', '') if form_data else '' }}" required>
        <small style="color: var(--text-muted);">We'll create an account for you to track your booking</small>
      </div>

      <div class="mb-2">
        <label class="form-label">Phone Number</label>
        <input class="form-control" type="tel" name="phone" 
               value="{{ form_data.get('phone', '') if form_data else '' }}">
      </div>

      <div class="mb-2">
        <label class="form-label">Preferred Date *</label>
        <input class="form-control" type="date" name="preferred_date" 
               value="{{ form_data.get('preferred_date', '') if form_data else '' }}" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Preferred Time *</label>
        <select class="form-control" name="preferred_time" required>
          <option value="">Select a time</option>
          <option value="09:00" {% if form_data and form_data.get('preferred_time') == '09:00' %}selected{% endif %}>09:00 AM</option>
          <option value="11:00" {% if form_data and form_data.get('preferred_time') == '11:00' %}selected{% endif %}>11:00 AM</option>
          <option value="13:00" {% if form_data and form_data.get('preferred_time') == '13:00' %}selected{% endif %}>01:00 PM</option>
          <option value="15:00" {% if form_data and form_data.get('preferred_time') == '15:00' %}selected{% endif %}>03:00 PM</option>
          <option value="17:00" {% if form_data and form_data.get('preferred_time') == '17:00' %}selected{% endif %}>05:00 PM</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Additional Notes</label>
        <textarea class="form-control" name="notes" rows="3" 
                  placeholder="Any specific requirements or questions?">{{ form_data.get('notes', '') if form_data else '' }}</textarea>
      </div>

      <button class="btn btn-primary w-100" type="submit">
        {% if booking_type == 'consultation' %}
          Confirm Consultation Booking
        {% else %}
          Confirm Installation Booking
        {% endif %}
      </button>
    </form>
  </div>

  <div style="text-align: center; margin-top: 20px;">
    <a class="btn-link" href="{{ url_for('product', slug=product['slug']) }}">‚Üê Back to {{ product["name"] }}</a>
  </div>
</div>
{% endblock %}